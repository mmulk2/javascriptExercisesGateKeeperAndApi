"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _raw=_interopRequireDefault(require("asap/raw.js")),_timers2=_interopRequireDefault(require("timers"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}const _later=(a,b)=>{let c,d=!1,e=!1;const f=()=>{d||(e=!0,b())};if(0>a)(0,_raw.default)(f);else if(0===a){const a=_timers2.default.setImmediate(f);c=()=>{_timers2.default.clearImmediate(a)}}else{const b=_timers2.default.setTimeout(f,a);c=()=>{_timers2.default.clearTimeout(b)}}return Object.defineProperties("function"==typeof b?{}:new Promise(a=>{b=a}),{cancel:{configurable:!0,enumerable:!0,value(){return d||(d=!0,c&&(c(),c=void 0)),this}},cancelled:{configurable:!0,enumerable:!0,get(){return d}},completed:{configurable:!0,enumerable:!0,get(){return e}}})};_later.asap=a=>_later(-1,a),_later.soon=a=>_later(0,a);var _default=_later;exports.default=_default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2pzL2xhdGVyLmpzIl0sIm5hbWVzIjpbIl9sYXRlciIsIm1pbGxpc2Vjb25kcyIsImNhbGxiYWNrRnVuY3Rpb24iLCJjbGVhclRpbWVyIiwiY2FuY2VsbGVkIiwiY29tcGxldGVkIiwidGltZXJGdW5jdGlvbiIsInRpbWVyIiwiX3RpbWVycyIsInNldEltbWVkaWF0ZSIsImNsZWFySW1tZWRpYXRlIiwic2V0VGltZW91dCIsImNsZWFyVGltZW91dCIsIk9iamVjdCIsImRlZmluZVByb3BlcnRpZXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsImNhbmNlbCIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJ2YWx1ZSIsImdldCIsImFzYXAiLCJzb29uIl0sIm1hcHBpbmdzIjoiOFFBR0EsS0FBTUEsQ0FBQUEsTUFBTSxDQUFHLENBQUNDLENBQUQsQ0FBZUMsQ0FBZixHQUFvQyxDQUMvQyxHQUNJQyxDQUFBQSxDQURKLENBQUlDLENBQVMsR0FBYixDQUVJQyxDQUFTLEdBRmIsQ0FJQSxLQUFNQyxDQUFBQSxDQUFhLENBQUcsSUFBTSxDQUNuQkYsQ0FEbUIsR0FFcEJDLENBQVMsR0FGVyxDQUdwQkgsQ0FBZ0IsRUFISSxDQUszQixDQUxELENBT0EsR0FBbUIsQ0FBZixDQUFBRCxDQUFKLENBQ0ksaUJBQU1LLENBQU4sQ0FESixLQUVPLElBQXFCLENBQWpCLEdBQUFMLENBQUosQ0FBd0IsQ0FDM0IsS0FBTU0sQ0FBQUEsQ0FBSyxDQUFHQyxpQkFBUUMsWUFBUixDQUFxQkgsQ0FBckIsQ0FBZCxDQUVBSCxDQUFVLENBQUcsSUFBTSxDQUNmSyxpQkFBUUUsY0FBUixDQUF1QkgsQ0FBdkIsQ0FDSCxDQUNKLENBTk0sSUFNQSxDQUNILEtBQU1BLENBQUFBLENBQUssQ0FBR0MsaUJBQVFHLFVBQVIsQ0FBbUJMLENBQW5CLENBQWtDTCxDQUFsQyxDQUFkLENBRUFFLENBQVUsQ0FBRyxJQUFNLENBQ2ZLLGlCQUFRSSxZQUFSLENBQXFCTCxDQUFyQixDQUNILENBQ0osQ0FFRCxNQUFPTSxDQUFBQSxNQUFNLENBQUNDLGdCQUFQLENBQ3lCLFVBQTVCLFFBQU9aLENBQUFBLENBQVAsQ0FDSSxFQURKLENBRUksR0FBSWEsQ0FBQUEsT0FBSixDQUFZQyxDQUFPLEVBQUksQ0FDbkJkLENBQWdCLENBQUdjLENBQ3RCLENBRkQsQ0FIRCxDQU1ILENBQ0lDLE1BQU0sQ0FBRSxDQUNKQyxZQUFZLEdBRFIsQ0FFSkMsVUFBVSxHQUZOLENBR0pDLEtBQUssRUFBSSxDQVVMLE1BVEtoQixDQUFBQSxDQVNMLEdBUklBLENBQVMsR0FRYixDQU5RRCxDQU1SLEdBTFFBLENBQVUsRUFLbEIsQ0FKUUEsQ0FBVSxPQUlsQixHQUFPLElBQ1YsQ0FkRyxDQURaLENBaUJJQyxTQUFTLENBQUUsQ0FDUGMsWUFBWSxHQURMLENBRVBDLFVBQVUsR0FGSCxDQUdQRSxHQUFHLEVBQUksQ0FDSCxNQUFPakIsQ0FBQUEsQ0FDVixDQUxNLENBakJmLENBd0JJQyxTQUFTLENBQUUsQ0FDUGEsWUFBWSxHQURMLENBRVBDLFVBQVUsR0FGSCxDQUdQRSxHQUFHLEVBQUksQ0FDSCxNQUFPaEIsQ0FBQUEsQ0FDVixDQUxNLENBeEJmLENBTkcsQ0F1Q1YsQ0FuRUQsQ0FxRUFMLE1BQU0sQ0FBQ3NCLElBQVAsQ0FBY3BCLENBQWdCLEVBQUlGLE1BQU0sQ0FBQyxDQUFDLENBQUYsQ0FBS0UsQ0FBTCxDLENBQ3hDRixNQUFNLENBQUN1QixJQUFQLENBQWNyQixDQUFnQixFQUFJRixNQUFNLENBQUMsQ0FBRCxDQUFJRSxDQUFKLEMsY0FFekJGLE0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2FzYXAgZnJvbSAnYXNhcC9yYXcuanMnO1xuaW1wb3J0IF90aW1lcnMgZnJvbSAndGltZXJzJztcblxuY29uc3QgX2xhdGVyID0gKG1pbGxpc2Vjb25kcywgY2FsbGJhY2tGdW5jdGlvbikgPT4ge1xuICAgIGxldCBjYW5jZWxsZWQgPSBmYWxzZSxcbiAgICAgICAgY2xlYXJUaW1lcixcbiAgICAgICAgY29tcGxldGVkID0gZmFsc2U7XG5cbiAgICBjb25zdCB0aW1lckZ1bmN0aW9uID0gKCkgPT4ge1xuICAgICAgICBpZiAoIWNhbmNlbGxlZCkge1xuICAgICAgICAgICAgY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNhbGxiYWNrRnVuY3Rpb24oKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAobWlsbGlzZWNvbmRzIDwgMCkge1xuICAgICAgICBfYXNhcCh0aW1lckZ1bmN0aW9uKTtcbiAgICB9IGVsc2UgaWYgKG1pbGxpc2Vjb25kcyA9PT0gMCkge1xuICAgICAgICBjb25zdCB0aW1lciA9IF90aW1lcnMuc2V0SW1tZWRpYXRlKHRpbWVyRnVuY3Rpb24pO1xuXG4gICAgICAgIGNsZWFyVGltZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBfdGltZXJzLmNsZWFySW1tZWRpYXRlKHRpbWVyKTtcbiAgICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0aW1lciA9IF90aW1lcnMuc2V0VGltZW91dCh0aW1lckZ1bmN0aW9uLCBtaWxsaXNlY29uZHMpO1xuXG4gICAgICAgIGNsZWFyVGltZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBfdGltZXJzLmNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFxuICAgICAgICB0eXBlb2YgY2FsbGJhY2tGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgICAgICB7fSA6XG4gICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja0Z1bmN0aW9uID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB7XG4gICAgICAgICAgICBjYW5jZWw6IHtcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2YWx1ZSAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxsZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYXJUaW1lcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVyID0gdm9pZCBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbmNlbGxlZDoge1xuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldCAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYW5jZWxsZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbXBsZXRlZDoge1xuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldCAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wbGV0ZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgKTtcbn07XG5cbl9sYXRlci5hc2FwID0gY2FsbGJhY2tGdW5jdGlvbiA9PiBfbGF0ZXIoLTEsIGNhbGxiYWNrRnVuY3Rpb24pO1xuX2xhdGVyLnNvb24gPSBjYWxsYmFja0Z1bmN0aW9uID0+IF9sYXRlcigwLCBjYWxsYmFja0Z1bmN0aW9uKTtcblxuZXhwb3J0IGRlZmF1bHQgX2xhdGVyO1xuIl19
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _getPropertyName2=_interopRequireDefault(require("./get-property-name.js")),_isotropicNaturalSort=_interopRequireDefault(require("isotropic-natural-sort"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var _default={create:a=>{const[{caseSensitive:b=!1,direction:c="asc",ignoreSpecialCharacters:d=!0,prefixPositions:e={},strictEmptyLines:f=!0}={}]=a.options,g=(0,_isotropicNaturalSort.default)({caseSensitive:b,direction:c,ignoreSpecialCharacters:d,prefixPositions:e}),h=a.getSourceCode();return{ObjectPattern(b){b.properties.reduce((b,c)=>{const d=(0,_getPropertyName2.default)(c);if(!d)return b;if(b){const e=[],i=(0,_getPropertyName2.default)(b);for(let a=b.loc.end.line;a<c.key.loc.start.line-1;a+=1)/^\s*$/u.test(h.lines[a])&&e.push(a);0<g(i,d)?(f&&1!==e.length||!f&&0===e.length)&&a.report({data:{previousPropertyName:i,propertyName:d},message:"Expected properties to be in order. '{{propertyName}}' should be before '{{previousPropertyName}}'.",node:c.key}):f&&e.length&&a.report({data:{previousPropertyName:i,propertyName:d},loc:{end:{column:0,line:e[e.length-1]+1},start:{column:0,line:e[0]+1}},message:"Unexpected empty line between '{{previousPropertyName}}' and '{{propertyName}}'.",node:c.key})}return c},null)},VariableDeclaration(b){const c=new Set;b.declarations.reduce((b,d)=>{if("Identifier"!==d.id.type){for(let a=d.loc.start.line;a<d.loc.end.line;a+=1)c.add(a);return b}if(b){const e=[];for(let a=b.loc.end.line;a<d.id.loc.start.line-1;a+=1)!c.has(a)&&/^\s*$/u.test(h.lines[a])&&e.push(a);0<g(b.id.name,d.id.name)?(f&&1!==e.length||!f&&0===e.length)&&a.report({data:{identifierName:d.id.name,previousIdentifierName:b.id.name},message:"Expected variables to be in order. '{{identifierName}}' should be before '{{previousIdentifierName}}'.",node:d.id}):f&&e.length&&a.report({data:{identifierName:d.id.name,previousIdentifierName:b.id.name},loc:{end:{column:0,line:e[e.length-1]+1},start:{column:0,line:e[0]+1}},message:"Unexpected empty line between '{{previousIdentifierName}}' and '{{identifierName}}'.",node:d.id})}return d},null)}}},meta:{docs:{category:"Stylistic Issues",description:"require variable declarations to be sorted",recommended:!0},fixable:null,schema:[{additionalProperties:!1,properties:{caseSensitive:{type:"boolean"},direction:{enum:["asc","desc"],type:"string"},ignoreSpecialCharacters:{type:"boolean"},prefixPositions:{type:"object"},strictEmptyLines:{type:"boolean"}},type:"object"}]}};exports.default=_default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2pzL3NvcnQtdmFycy5qcyJdLCJuYW1lcyI6WyJjcmVhdGUiLCJjb250ZXh0IiwiY2FzZVNlbnNpdGl2ZSIsImRpcmVjdGlvbiIsImlnbm9yZVNwZWNpYWxDaGFyYWN0ZXJzIiwicHJlZml4UG9zaXRpb25zIiwic3RyaWN0RW1wdHlMaW5lcyIsIm9wdGlvbnMiLCJuYXR1cmFsU29ydCIsInNvdXJjZUNvZGUiLCJnZXRTb3VyY2VDb2RlIiwiT2JqZWN0UGF0dGVybiIsIm5vZGUiLCJwcm9wZXJ0aWVzIiwicmVkdWNlIiwicHJldmlvdXNQcm9wZXJ0eSIsInByb3BlcnR5IiwicHJvcGVydHlOYW1lIiwiZW1wdHlMaW5lSW5kZXhlcyIsInByZXZpb3VzUHJvcGVydHlOYW1lIiwibGluZUluZGV4IiwibG9jIiwiZW5kIiwibGluZSIsImtleSIsInN0YXJ0IiwidGVzdCIsImxpbmVzIiwicHVzaCIsImxlbmd0aCIsInJlcG9ydCIsImRhdGEiLCJtZXNzYWdlIiwiY29sdW1uIiwiVmFyaWFibGVEZWNsYXJhdGlvbiIsImlnbm9yZUxpbmVJbmRleFNldCIsIlNldCIsImRlY2xhcmF0aW9ucyIsInByZXZpb3VzRGVjbGFyYXRpb24iLCJkZWNsYXJhdGlvbiIsImlkIiwidHlwZSIsImFkZCIsImhhcyIsIm5hbWUiLCJpZGVudGlmaWVyTmFtZSIsInByZXZpb3VzSWRlbnRpZmllck5hbWUiLCJtZXRhIiwiZG9jcyIsImNhdGVnb3J5IiwiZGVzY3JpcHRpb24iLCJyZWNvbW1lbmRlZCIsImZpeGFibGUiLCJzY2hlbWEiLCJhZGRpdGlvbmFsUHJvcGVydGllcyIsImVudW0iXSwibWFwcGluZ3MiOiJnVkFHZSxDQUNYQSxNQUFNLENBQUVDLENBQU8sRUFBSSxDQUNmLEtBQU0sQ0FBQyxDQUNDQyxhQUFhLENBQWJBLENBQWEsR0FEZCxDQUVDQyxTQUFTLENBQVRBLENBQVMsQ0FBRyxLQUZiLENBR0NDLHVCQUF1QixDQUF2QkEsQ0FBdUIsR0FIeEIsQ0FJQ0MsZUFBZSxD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LG9CQUFvQixHQURmLENBRUx6QyxVQUFVLENBQUUsQ0FDUlgsYUFBYSxDQUFFLENBQ1h1QyxJQUFJLENBQUUsU0FESyxDQURQLENBSVJ0QyxTQUFTLENBQUUsQ0FDUG9ELElBQUksQ0FBRSxDQUNGLEtBREUsQ0FFRixNQUZFLENBREMsQ0FLUGQsSUFBSSxDQUFFLFFBTEMsQ0FKSCxDQVdSckMsdUJBQXVCLENBQUUsQ0FDckJxQyxJQUFJLENBQUUsU0FEZSxDQVhqQixDQWNScEMsZUFBZSxDQUFFLENBQ2JvQyxJQUFJLENBQUUsUUFETyxDQWRULENBaUJSbkMsZ0JBQWdCLENBQUUsQ0FDZG1DLElBQUksQ0FBRSxTQURRLENBakJWLENBRlAsQ0F1QkxBLElBQUksQ0FBRSxRQXZCRCxDQUFELENBUE4sQ0FuSUssQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfZ2V0UHJvcGVydHlOYW1lIGZyb20gJy4vZ2V0LXByb3BlcnR5LW5hbWUuanMnO1xuaW1wb3J0IF9uYXR1cmFsU29ydCBmcm9tICdpc290cm9waWMtbmF0dXJhbC1zb3J0JztcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGNyZWF0ZTogY29udGV4dCA9PiB7XG4gICAgICAgIGNvbnN0IFt7XG4gICAgICAgICAgICAgICAgY2FzZVNlbnNpdGl2ZSA9IGZhbHNlLFxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9ICdhc2MnLFxuICAgICAgICAgICAgICAgIGlnbm9yZVNwZWNpYWxDaGFyYWN0ZXJzID0gdHJ1ZSxcbiAgICAgICAgICAgICAgICBwcmVmaXhQb3NpdGlvbnMgPSB7fSxcbiAgICAgICAgICAgICAgICBzdHJpY3RFbXB0eUxpbmVzID0gdHJ1ZVxuICAgICAgICAgICAgfSA9IHt9XSA9IGNvbnRleHQub3B0aW9ucyxcbiAgICAgICAgICAgIG5hdHVyYWxTb3J0ID0gX25hdHVyYWxTb3J0KHtcbiAgICAgICAgICAgICAgICBjYXNlU2Vuc2l0aXZlLFxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgICAgICAgICBpZ25vcmVTcGVjaWFsQ2hhcmFjdGVycyxcbiAgICAgICAgICAgICAgICBwcmVmaXhQb3NpdGlvbnNcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgc291cmNlQ29kZSA9IGNvbnRleHQuZ2V0U291cmNlQ29kZSgpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBPYmplY3RQYXR0ZXJuIChub2RlKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5wcm9wZXJ0aWVzLnJlZHVjZSgocHJldmlvdXNQcm9wZXJ0eSwgcHJvcGVydHkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydHlOYW1lID0gX2dldFByb3BlcnR5TmFtZShwcm9wZXJ0eSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2aW91c1Byb3BlcnR5O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzUHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtcHR5TGluZUluZGV4ZXMgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Byb3BlcnR5TmFtZSA9IF9nZXRQcm9wZXJ0eU5hbWUocHJldmlvdXNQcm9wZXJ0eSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGxpbmVJbmRleCA9IHByZXZpb3VzUHJvcGVydHkubG9jLmVuZC5saW5lOyBsaW5lSW5kZXggPCBwcm9wZXJ0eS5rZXkubG9jLnN0YXJ0LmxpbmUgLSAxOyBsaW5lSW5kZXggKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvXlxccyokL3UudGVzdChzb3VyY2VDb2RlLmxpbmVzW2xpbmVJbmRleF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5TGluZUluZGV4ZXMucHVzaChsaW5lSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hdHVyYWxTb3J0KHByZXZpb3VzUHJvcGVydHlOYW1lLCBwcm9wZXJ0eU5hbWUpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJpY3RFbXB0eUxpbmVzICYmIGVtcHR5TGluZUluZGV4ZXMubGVuZ3RoICE9PSAxIHx8ICFzdHJpY3RFbXB0eUxpbmVzICYmIGVtcHR5TGluZUluZGV4ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQucmVwb3J0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Byb3BlcnR5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXhwZWN0ZWQgcHJvcGVydGllcyB0byBiZSBpbiBvcmRlci4gXFwne3twcm9wZXJ0eU5hbWV9fVxcJyBzaG91bGQgYmUgYmVmb3JlIFxcJ3t7cHJldmlvdXNQcm9wZXJ0eU5hbWV9fVxcJy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZTogcHJvcGVydHkua2V5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RyaWN0RW1wdHlMaW5lcyAmJiBlbXB0eUxpbmVJbmRleGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQucmVwb3J0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNQcm9wZXJ0eU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW46IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZTogZW1wdHlMaW5lSW5kZXhlc1tlbXB0eUxpbmVJbmRleGVzLmxlbmd0aCAtIDFdICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmU6IGVtcHR5TGluZUluZGV4ZXNbMF0gKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdVbmV4cGVjdGVkIGVtcHR5IGxpbmUgYmV0d2VlbiBcXCd7e3ByZXZpb3VzUHJvcGVydHlOYW1lfX1cXCcgYW5kIFxcJ3t7cHJvcGVydHlOYW1lfX1cXCcuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZTogcHJvcGVydHkua2V5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvcGVydHk7XG4gICAgICAgICAgICAgICAgfSwgbnVsbCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgVmFyaWFibGVEZWNsYXJhdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlnbm9yZUxpbmVJbmRleFNldCA9IG5ldyBTZXQoKTtcblxuICAgICAgICAgICAgICAgIG5vZGUuZGVjbGFyYXRpb25zLnJlZHVjZSgocHJldmlvdXNEZWNsYXJhdGlvbiwgZGVjbGFyYXRpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlY2xhcmF0aW9uLmlkLnR5cGUgIT09ICdJZGVudGlmaWVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbGluZUluZGV4ID0gZGVjbGFyYXRpb24ubG9jLnN0YXJ0LmxpbmU7IGxpbmVJbmRleCA8IGRlY2xhcmF0aW9uLmxvYy5lbmQubGluZTsgbGluZUluZGV4ICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZ25vcmVMaW5lSW5kZXhTZXQuYWRkKGxpbmVJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2aW91c0RlY2xhcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzRGVjbGFyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtcHR5TGluZUluZGV4ZXMgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbGluZUluZGV4ID0gcHJldmlvdXNEZWNsYXJhdGlvbi5sb2MuZW5kLmxpbmU7IGxpbmVJbmRleCA8IGRlY2xhcmF0aW9uLmlkLmxvYy5zdGFydC5saW5lIC0gMTsgbGluZUluZGV4ICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlnbm9yZUxpbmVJbmRleFNldC5oYXMobGluZUluZGV4KSAmJiAvXlxccyokL3UudGVzdChzb3VyY2VDb2RlLmxpbmVzW2xpbmVJbmRleF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5TGluZUluZGV4ZXMucHVzaChsaW5lSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hdHVyYWxTb3J0KHByZXZpb3VzRGVjbGFyYXRpb24uaWQubmFtZSwgZGVjbGFyYXRpb24uaWQubmFtZSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmljdEVtcHR5TGluZXMgJiYgZW1wdHlMaW5lSW5kZXhlcy5sZW5ndGggIT09IDEgfHwgIXN0cmljdEVtcHR5TGluZXMgJiYgZW1wdHlMaW5lSW5kZXhlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5yZXBvcnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkZW50aWZpZXJOYW1lOiBkZWNsYXJhdGlvbi5pZC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzSWRlbnRpZmllck5hbWU6IHByZXZpb3VzRGVjbGFyYXRpb24uaWQubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFeHBlY3RlZCB2YXJpYWJsZXMgdG8gYmUgaW4gb3JkZXIuIFxcJ3t7aWRlbnRpZmllck5hbWV9fVxcJyBzaG91bGQgYmUgYmVmb3JlIFxcJ3t7cHJldmlvdXNJZGVudGlmaWVyTmFtZX19XFwnLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlOiBkZWNsYXJhdGlvbi5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0cmljdEVtcHR5TGluZXMgJiYgZW1wdHlMaW5lSW5kZXhlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnJlcG9ydCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkZW50aWZpZXJOYW1lOiBkZWNsYXJhdGlvbi5pZC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNJZGVudGlmaWVyTmFtZTogcHJldmlvdXNEZWNsYXJhdGlvbi5pZC5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmU6IGVtcHR5TGluZUluZGV4ZXNbZW1wdHlMaW5lSW5kZXhlcy5sZW5ndGggLSAxXSArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lOiBlbXB0eUxpbmVJbmRleGVzWzBdICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVW5leHBlY3RlZCBlbXB0eSBsaW5lIGJldHdlZW4gXFwne3twcmV2aW91c0lkZW50aWZpZXJOYW1lfX1cXCcgYW5kIFxcJ3t7aWRlbnRpZmllck5hbWV9fVxcJy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlOiBkZWNsYXJhdGlvbi5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlY2xhcmF0aW9uO1xuICAgICAgICAgICAgICAgIH0sIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sXG4gICAgbWV0YToge1xuICAgICAgICBkb2NzOiB7XG4gICAgICAgICAgICBjYXRlZ29yeTogJ1N0eWxpc3RpYyBJc3N1ZXMnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdyZXF1aXJlIHZhcmlhYmxlIGRlY2xhcmF0aW9ucyB0byBiZSBzb3J0ZWQnLFxuICAgICAgICAgICAgcmVjb21tZW5kZWQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgZml4YWJsZTogbnVsbCxcbiAgICAgICAgc2NoZW1hOiBbe1xuICAgICAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgIGNhc2VTZW5zaXRpdmU6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgZW51bTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2FzYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGVzYydcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlnbm9yZVNwZWNpYWxDaGFyYWN0ZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdib29sZWFuJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcHJlZml4UG9zaXRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdvYmplY3QnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdHJpY3RFbXB0eUxpbmVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdib29sZWFuJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0eXBlOiAnb2JqZWN0J1xuICAgICAgICB9XVxuICAgIH1cbn07XG4iXX0=